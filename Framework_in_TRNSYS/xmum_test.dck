VERSION 18
*******************************************************************************
*** TRNSYS input file (deck) generated by TrnsysStudio
*** on Tuesday, August 18, 2020 at 17:41
*** from TrnsysStudio project: C:\MPCframework\Framework_in_TRNSYS\xmum_test.tpf
*** 
*** If you edit this file, use the File/Import TRNSYS Input File function in 
*** TrnsysStudio to update the project. 
*** 
*** If you have problems, questions or suggestions please contact your local 
*** TRNSYS distributor or mailto:software@cstb.fr 
*** 
*******************************************************************************


*******************************************************************************
*** Units 
*******************************************************************************

*******************************************************************************
*** Control cards
*******************************************************************************
* START, STOP and STEP
CONSTANTS 3
START=0
STOP=87
STEP=10/60
SIMULATION 	 START	 STOP	 STEP	! Start time	End time	Time step
TOLERANCES 0.0001 0.0001			! Integration	 Convergence
LIMITS 50 5000 50				! Max iterations	Max warnings	Trace limit
DFQ 1					! TRNSYS numerical integration solver method
WIDTH 80				! TRNSYS output file width, number of characters
LIST 					! NOLIST statement
					! MAP statement
SOLVER 0 1 1				! Solver statement	Minimum relaxation factor	Maximum relaxation factor
NAN_CHECK 1				! Nan DEBUG statement
OVERWRITE_CHECK 1			! Overwrite DEBUG statement
TIME_REPORT 1			! enable time report statement
EQSOLVER 0				! EQUATION SOLVER statement
* User defined CONSTANTS 
*$USER_CONSTANTS
EQUATIONS 1
N_Plots = INT((STOP-START)/168.001)+1
*$USER_CONSTANTS_END


* EQUATIONS "W_to_kJ/h"
* 
EQUATIONS 1
kJ_per_hour = elec*3.6
*$UNIT_NAME W_to_kJ/h
*$LAYER Main
*$POSITION 704 504
*$UNIT_NUMBER 2

*------------------------------------------------------------------------------


* EQUATIONS "OCC_Schedule"
* 
EQUATIONS 1
occ_schedule = occ  
*$UNIT_NAME OCC_Schedule
*$LAYER Main
*$POSITION 382 504
*$UNIT_NUMBER 3

*------------------------------------------------------------------------------


* EQUATIONS "OccData"
* 
EQUATIONS 5
OCCnum = 1
heat = eql(OCCnum, 1)*[5,3] + eql(OCCnum, 2)*[6,3] + eql(OCCnum, 3)*[8,3] + eql(OCCnum, 4)*[9,3] + eql(OCCnum, 5)*[7,3]
occ = eql(OCCnum, 1)*[5,1] + eql(OCCnum, 2)*[6,1] + eql(OCCnum, 3)*[8,1] + eql(OCCnum, 4)*[9,1] + eql(OCCnum, 5)*[7,1]
cool = eql(OCCnum, 1)*[5,4] + eql(OCCnum, 2)*[6,4] + eql(OCCnum, 3)*[8,4] + eql(OCCnum, 4)*[9,4] + eql(OCCnum, 5)*[7,4]
elec = eql(OCCnum, 1)*[5,2] + eql(OCCnum, 2)*[6,2] + eql(OCCnum, 3)*[8,2] + eql(OCCnum, 4)*[9,2] + eql(OCCnum, 5)*[7,2]
*$UNIT_NAME OccData
*$LAYER Main
*$POSITION 481 362
*$UNIT_NUMBER 4

*------------------------------------------------------------------------------


* Model "OCC1" (Type 9)
* 

UNIT 5 TYPE 9	 OCC1
*$UNIT_NAME OCC1
*$MODEL .\Utility\Data Readers\Generic Data Files\Expert Mode\Free Format\Type9e.tmf
*$POSITION 307 216
*$LAYER Main # 
PARAMETERS 22
2		! 1 Mode
0		! 2 Header Lines to Skip
4		! 3 No. of values to read
0.166667		! 4 Time interval of data
-1		! 5 Interpolate or not-1
1.0		! 6 Multiplication factor-1
0		! 7 Addition factor-1
1		! 8 Average or instantaneous value-1
-1		! 9 Interpolate or not-2
1.0		! 10 Multiplication factor-2
0		! 11 Addition factor-2
1		! 12 Average or instantaneous value-2
-1		! 13 Interpolate or not-3
1.0		! 14 Multiplication factor-3
0		! 15 Addition factor-3
1		! 16 Average or instantaneous value-3
-1		! 17 Interpolate or not-4
1.0		! 18 Multiplication factor-4
0		! 19 Addition factor-4
1		! 20 Average or instantaneous value-4
65		! 21 Logical unit for input file
-1		! 22 Free format mode
*** External files
ASSIGN "OccElec_Data\UltimateData1.txt" 65
*|? Input file name |1000
*------------------------------------------------------------------------------

* Model "OCC2" (Type 9)
* 

UNIT 6 TYPE 9	 OCC2
*$UNIT_NAME OCC2
*$MODEL .\Utility\Data Readers\Generic Data Files\Expert Mode\Free Format\Type9e.tmf
*$POSITION 393 216
*$LAYER Main # 
PARAMETERS 22
2		! 1 Mode
0		! 2 Header Lines to Skip
4		! 3 No. of values to read
0.166667		! 4 Time interval of data
-1		! 5 Interpolate or not-1
1.0		! 6 Multiplication factor-1
0		! 7 Addition factor-1
1		! 8 Average or instantaneous value-1
-1		! 9 Interpolate or not-2
1.0		! 10 Multiplication factor-2
0		! 11 Addition factor-2
1		! 12 Average or instantaneous value-2
-1		! 13 Interpolate or not-3
1.0		! 14 Multiplication factor-3
0		! 15 Addition factor-3
1		! 16 Average or instantaneous value-3
-1		! 17 Interpolate or not-4
1.0		! 18 Multiplication factor-4
0		! 19 Addition factor-4
1		! 20 Average or instantaneous value-4
66		! 21 Logical unit for input file
-1		! 22 Free format mode
*** External files
ASSIGN "OccElec_Data\UltimateData2.txt" 66
*|? Input file name |1000
*------------------------------------------------------------------------------

* Model "OCC5" (Type 9)
* 

UNIT 7 TYPE 9	 OCC5
*$UNIT_NAME OCC5
*$MODEL .\Utility\Data Readers\Generic Data Files\Expert Mode\Free Format\Type9e.tmf
*$POSITION 648 216
*$LAYER Main # 
PARAMETERS 22
2		! 1 Mode
0		! 2 Header Lines to Skip
4		! 3 No. of values to read
0.166667		! 4 Time interval of data
-1		! 5 Interpolate or not-1
1.0		! 6 Multiplication factor-1
0		! 7 Addition factor-1
1		! 8 Average or instantaneous value-1
-1		! 9 Interpolate or not-2
1.0		! 10 Multiplication factor-2
0		! 11 Addition factor-2
1		! 12 Average or instantaneous value-2
-1		! 13 Interpolate or not-3
1.0		! 14 Multiplication factor-3
0		! 15 Addition factor-3
1		! 16 Average or instantaneous value-3
-1		! 17 Interpolate or not-4
1.0		! 18 Multiplication factor-4
0		! 19 Addition factor-4
1		! 20 Average or instantaneous value-4
67		! 21 Logical unit for input file
-1		! 22 Free format mode
*** External files
ASSIGN "OccElec_Data\UltimateData5.txt" 67
*|? Input file name |1000
*------------------------------------------------------------------------------

* Model "OCC3" (Type 9)
* 

UNIT 8 TYPE 9	 OCC3
*$UNIT_NAME OCC3
*$MODEL .\Utility\Data Readers\Generic Data Files\Expert Mode\Free Format\Type9e.tmf
*$POSITION 478 216
*$LAYER Main # 
PARAMETERS 22
2		! 1 Mode
0		! 2 Header Lines to Skip
4		! 3 No. of values to read
0.166667		! 4 Time interval of data
-1		! 5 Interpolate or not-1
1.0		! 6 Multiplication factor-1
0		! 7 Addition factor-1
1		! 8 Average or instantaneous value-1
-1		! 9 Interpolate or not-2
1.0		! 10 Multiplication factor-2
0		! 11 Addition factor-2
1		! 12 Average or instantaneous value-2
-1		! 13 Interpolate or not-3
1.0		! 14 Multiplication factor-3
0		! 15 Addition factor-3
1		! 16 Average or instantaneous value-3
-1		! 17 Interpolate or not-4
1.0		! 18 Multiplication factor-4
0		! 19 Addition factor-4
1		! 20 Average or instantaneous value-4
68		! 21 Logical unit for input file
-1		! 22 Free format mode
*** External files
ASSIGN "OccElec_Data\UltimateData3.txt" 68
*|? Input file name |1000
*------------------------------------------------------------------------------

* Model "OCC4" (Type 9)
* 

UNIT 9 TYPE 9	 OCC4
*$UNIT_NAME OCC4
*$MODEL .\Utility\Data Readers\Generic Data Files\Expert Mode\Free Format\Type9e.tmf
*$POSITION 563 216
*$LAYER Main # 
PARAMETERS 22
2		! 1 Mode
0		! 2 Header Lines to Skip
4		! 3 No. of values to read
0.166667		! 4 Time interval of data
-1		! 5 Interpolate or not-1
1.0		! 6 Multiplication factor-1
0		! 7 Addition factor-1
1		! 8 Average or instantaneous value-1
-1		! 9 Interpolate or not-2
1.0		! 10 Multiplication factor-2
0		! 11 Addition factor-2
1		! 12 Average or instantaneous value-2
-1		! 13 Interpolate or not-3
1.0		! 14 Multiplication factor-3
0		! 15 Addition factor-3
1		! 16 Average or instantaneous value-3
-1		! 17 Interpolate or not-4
1.0		! 18 Multiplication factor-4
0		! 19 Addition factor-4
1		! 20 Average or instantaneous value-4
69		! 21 Logical unit for input file
-1		! 22 Free format mode
*** External files
ASSIGN "OccElec_Data\UltimateData4.txt" 69
*|? Input file name |1000
*------------------------------------------------------------------------------

* Model "MPCcontroller" (Type 155)
* 

UNIT 26 TYPE 155	 MPCcontroller
*$UNIT_NAME MPCcontroller
*$MODEL .\Utility\Calling External Programs\Matlab\Type155.tmf
*$POSITION 1007 459
*$LAYER Main # 
PARAMETERS 5
0		! 1 Mode
11		! 2 Number of inputs
2		! 3 Number of outputs
0		! 4 Calling Mode
0		! 5 Keep Matlab open after simulation
INPUTS 11
0,0		! [unconnected] input-1
0,0		! [unconnected] input-2
0,0		! [unconnected] input-3
0,0		! [unconnected] input-4
kJ_per_hour		! W_to_kJ/h:kJ_per_hour ->input-5
0,0		! [unconnected] input-6
0,0		! [unconnected] input-7
occ_schedule		! OCC_Schedule:occ_schedule ->input-8
0,0		! [unconnected] input-9
0,0		! [unconnected] input-10
0,0		! [unconnected] input-11
*** INITIAL INPUT VALUES
0 0 0 0 0 0 0 0 0 0 0 
LABELS 1
test_xmum.m
*------------------------------------------------------------------------------

* Model "System_Plotter" (Type 65)
* 

UNIT 13 TYPE 65	 System_Plotter
*$UNIT_NAME System_Plotter
*$MODEL \TRNSYS18\Studio\lib\System_Output\TYPE65d.tmf
*$POSITION 1568 410
*$LAYER OutputSystem # 
PARAMETERS 12
2		! 1 Nb. of left-axis variables
2		! 2 Nb. of right-axis variables
0.0		! 3 Left axis minimum
1000.0		! 4 Left axis maximum
0.0		! 5 Right axis minimum
1000.0		! 6 Right axis maximum
1		! 7 Number of plots per simulation
12		! 8 X-axis gridpoints
0		! 9 Shut off Online w/o removing
-1		! 10 Logical unit for output file
0		! 11 Output file units
0		! 12 Output file delimiter
INPUTS 4
kJ_per_hour		! W_to_kJ/h:kJ_per_hour ->Left axis variable-1
26,1 		! MPCcontroller:output-1 ->Left axis variable-2
occ_schedule		! OCC_Schedule:occ_schedule ->Right axis variable-1
26,2 		! MPCcontroller:output-2 ->Right axis variable-2
*** INITIAL INPUT VALUES
kJ_per_hour output-1 occ_schedule output-2 
LABELS  3
"Temperatures"
"Heat transfer rates"
"Graph 1"
*------------------------------------------------------------------------------

* Model "System_Printer" (Type 25)
* 

UNIT 12 TYPE 25	 System_Printer
*$UNIT_NAME System_Printer
*$MODEL \TRNSYS18\Studio\lib\System_Output\Type25a.tmf
*$POSITION 1718 100
*$LAYER OutputSystem # 
PARAMETERS 10
STEP		! 1 Printing interval
START		! 2 Start time
STOP		! 3 Stop time
70		! 4 Logical unit
2		! 5 Units printing mode
0		! 6 Relative or absolute start time
-1		! 7 Overwrite or Append
-1		! 8 Print header
0		! 9 Delimiter
1		! 10 Print labels
INPUTS 2
26,1 		! MPCcontroller:output-1 ->Input to be printed-1
kJ_per_hour		! W_to_kJ/h:kJ_per_hour ->Input to be printed-2
*** INITIAL INPUT VALUES
matlab_out trnsys_output 
*** External files
ASSIGN "***.out" 70
*|? Which file should contain the printed results? You can use the deck filename by entering "***", e.g. "***.out", or "***.dat"  |1000
*------------------------------------------------------------------------------

END
*!LINK_STYLE
*!LINK 4:2
*!CONNECTION_SET 40:40:0:0:1:0:0:0:1:501,376:655,376:655,474:686,474
*!LINK 4:3
*!CONNECTION_SET 0:40:20:0:1:0:0:0:1:461,376:382,376:382,474
*!LINK 7:4
*!CONNECTION_SET 0:40:40:0:19,17,20,18:0:0:0:1:578,162:538,162:538,272:448,272
*!LINK 9:4
*!CONNECTION_SET 0:40:40:0:15,13,16,14:0:0:0:1:493,162:453,162:453,272:448,272
*!LINK 6:4
*!CONNECTION_SET 20:40:0:0:7,5,8,6:0:0:0:1:343,162:398,162:398,272:408,272
*!LINK 5:4
*!CONNECTION_SET 40:40:0:0:3,1,4,2:0:0:0:1:277,162:312,162:312,272:408,272
*!LINK 8:4
*!CONNECTION_SET 20:40:20:0:11,9,12,10:0:0:0:1:428,162:483,162:483,261:428,261:428,272
*!LINK 2:26
*!CONNECTION_SET 0:0:20:40:8,5:32768:0:3:1:602,846:530,846:530,598
*!LINK 2:13
*!CONNECTION_SET 32:16:0:20:1,3:0:0:0:1:1864,1398:2264,1398:2264,1065:2301,1065
*!LINK 26:13
*!CONNECTION_SET 40:20:0:20:4,2:0:0:0:1:1780,1114:2264,1114:2264,1065:2301,1065
*!LINK 26:12
*!CONNECTION_SET 40:20:0:20:1:0:0:0:1:1027,453:1661,453:1661,94:1698,94
*!LINK 2:12
*!CONNECTION_SET 32:16:0:20:2:0:0:0:1:1111,737:1661,737:1661,94:1698,94
*!LINK_STYLE_END
